# å®˜æ–¹æ‰‹å†Œ - https://manual.nssurge.com/
# ç†è§£åŸç† - https://manual.nssurge.com/book/understanding-surge/cn/
# æŠ€æœ¯ç¤¾åŒº - https://community.nssurge.com
# æ¨¡å—åˆé›† - https://book.surge.tel/surge-ios/modules

# é“¾æ¥ä¸‹è½½ - https://raw.githubusercontent.com/Di1123/1123/main/surge/surge.conf

# 2024å¹´6æœˆ24æ—¥20:56:19
[General]
# å¢å¼ºç‰ˆ Wi-Fi åŠ©ç†
wifi-assist = true

# æ··åˆç½‘ç»œ
all-hybrid = false

#æé«˜å¤„ç† UDP æµé‡ä¼˜å…ˆçº§
udp-priority = true

# ç½‘ç»œè®¿é—®å»¶è¿Ÿæµ‹é€ŸURL
internet-test-url = http://www.apple.com/library/test/success.html

# ä»£ç†å»¶è¿Ÿæµ‹é€ŸURL
proxy-test-url = http://cp.cloudflare.com/generate_204

# æµ‹è¯•è¶…æ—¶ï¼ˆç§’ï¼‰
test-timeout = 5

# GeoIPæ•°æ®åº“
geoip-maxmind-url = https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country.mmdb

# GeoIPæ•°æ®åº“è‡ªåŠ¨æ›´æ–°
disable-geoip-db-auto-update = false

# IPv6æ”¯æŒ
ipv6 = false

# IPv6 VIF
ipv6-vif = disabled

# å…è®¸Wi-Fiè®¿é—®
allow-wifi-access = false

# å…è®¸ä¸ªäººçƒ­ç‚¹è®¿é—®
allow-hotspot-access = true

# æ—¥å¿—çº§åˆ«
loglevel = notify

# ä» /etc/hosts è¯»å– DNS è®°å½•
read-etc-hosts = true

# å½“é‡åˆ° REJECT ç­–ç•¥æ—¶è¿”å›é”™è¯¯é¡µ
show-error-page-for-reject = true

# > DNS æœåŠ¡å™¨
dns-server = 119.29.29.29, 223.5.5.5, system
# encrypted-dns-server = https://223.5.5.5/dns-query

# DNS åŠ«æŒ
hijack-dns = *:53

# è·³è¿‡ä»£ç†
skip-proxy = 192.168.0.0/24, 10.0.0.0/8, 172.16.0.0/12, 127.0.0.1, localhost, *.local, seed-sequoia.siri.apple.com, sequoia.siri.apple.com, sequoia.apple.com, iosapps.itunes.apple.com

# æ’é™¤ç®€å•ä¸»æœºå
exclude-simple-hostnames = true

# çœŸå®IPåœ°å€
always-real-ip = *.battlenet.com.cn, *.battlenet.com, *.blzstatic.cn, *.battle.net

[Replica]
# > éšè— Apple è¯·æ±‚
hide-apple-request = false
# > éšè—å´©æºƒè¿½è¸ªå™¨è¯·æ±‚
hide-crash-reporter-request = true
# > éšè— UDP ä¼šè¯
hide-udp = false
# > å…³é”®è¯è¿‡æ»¤å™¨
keyword-filter-type = false

[Panel]
YJ = script-name=YJ,update-interval=43200

[Proxy]
direct = PROXY

[Proxy Group]
# æœºåœºä¿¡æ¯ (encodeåœ°å€é“¾æ¥: https://www.urlencoder.orgï¼‰
FlowerCloud = select, policy-path=http://sub.info?url=[URL encode åçš„æœºåœºèŠ‚ç‚¹é“¾æ¥]&due_day=9&alert=1&title=flowercloud, update-interval=3600, hidden=false

PROXY = select, HK, TW, JP, SG, US
Final = select, HK, TW, JP, SG, US, DIRECT
YouTube = select, HK, TW, JP, SG, US
Telegram = select, HK, SG, US
Streaming = select, HK, TW, JP, SG, US
HK = smart, include-other-group=æ‰‹åŠ¨é€‰æ‹©, update-interval=0, no-alert=0, hidden=0, include-all-proxies=0, policy-regex-filter=(ğŸ‡­ğŸ‡°)|(æ¸¯)|(Hong)|(HK)
TW = smart, include-other-group=æ‰‹åŠ¨é€‰æ‹©, update-interval=0, no-alert=0, hidden=0, include-all-proxies=0, policy-regex-filter=(ğŸ‡¨ğŸ‡³)|(å°)|(Tai)|(TW)
JP = smart, include-other-group=æ‰‹åŠ¨é€‰æ‹©, update-interval=0, no-alert=0, hidden=0, include-all-proxies=0, policy-regex-filter=(ğŸ‡¯ğŸ‡µ)|(æ—¥)|(Japan)|(JP)
SG = smart, include-other-group=æ‰‹åŠ¨é€‰æ‹©, update-interval=0, no-alert=0, hidden=0, include-all-proxies=0, policy-regex-filter=(ğŸ‡¸ğŸ‡¬)|(æ–°)|(Singapore)|(SG)
US = smart, include-other-group=æ‰‹åŠ¨é€‰æ‹©, update-interval=0, no-alert=0, hidden=0, include-all-proxies=0, policy-regex-filter=(ğŸ‡ºğŸ‡¸)|(ç¾)|(States)|(US)
æ‰‹åŠ¨é€‰æ‹© = select, policy-path=è®¢é˜…å€, update-interval=0, no-alert=0, hidden=0, include-all-proxies=0
[Rule]
# é˜»æ­¢æ‰€æœ‰ UDP æµé‡è¿›å…¥443ç«¯å£ï¼Œä½¿ HTTP3 è¯·æ±‚å›è½åˆ° TCP æµé‡ã€‚
AND,((PROTOCOL,UDP), (DEST-PORT,443)),REJECT-NO-DROP

# Safari è®¿é—®é˜²è·³è½¬ App
DOMAIN,app-site-association.cdn-apple.com,REJECT

# é˜²æ­¢åº”ç”¨å¾ªç¯è¯·æ±‚
IP-CIDR,0.0.0.0/32,REJECT,no-resolve

# Boxjs ä»£ç†
DOMAIN-KEYWORD,jsdelivr.net,PROXY

# Sub-Store çš„ Web é¡µé¢
DOMAIN-SUFFIX,vercel.app,PROXY

# Custom
DEST-PORT,123,DIRECT

# Direct+
RULE-SET,https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Direct+.list,DIRECT,extended-matching

# Reject
RULE-SET,https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Extra/Reject/Advertising.list,REJECT,extended-matching
RULE-SET,https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Extra/Reject/Hijacking.list,REJECT,extended-matching
RULE-SET,https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Extra/Reject/Tracking.list,REJECT,extended-matching
RULE-SET,https://raw.githubusercontent.com/Cats-Team/AdRules/main/adrules.list,REJECT,extended-matching

# YouTube è§†é¢‘
RULE-SET,https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Extra/Streaming/Video/YouTube.list,YouTube,extended-matching

# Telegram æœåŠ¡
# Telegram DC1
IP-ASN,59930,US,no-resolve
# Telegram DC3
IP-ASN,211157,US,no-resolve
# Telegram DC5
IP-ASN,62014,SG,no-resolve
RULE-SET,https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Extra/Telegram.list,Telegram,extended-matching

# Streaming!CN
RULE-SET,https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Extra/Streaming/!CN.list,Streaming,extended-matching

# Twitter
RULE-SET,https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Extra/X.list,PROXY,extended-matching

# GitHub
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/GitHub/GitHub.list,PROXY,extended-matching

# Proxy
RULE-SET,https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Proxy.list,PROXY,extended-matching

# Direct
RULE-SET,https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Direct.list,DIRECT,extended-matching

# Local Area Network
RULE-SET,LAN,DIRECT

# GeoIP China
GEOIP,CN,DIRECT

# Proxy+
RULE-SET,https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Proxy+.list,PROXY

# Final å…œåº•
FINAL,Final,dns-failed

[URL Rewrite]
# Safari å…¨èƒ½æœç´¢ã€éœ€è¦æŠŠ Safari çš„æœç´¢å¼•æ“è®¾ç½®ä¸º: DuckDuckGo
^https:\/\/duckduckgo.com\/\?q=gm\+([^&]+).+ https://www.google.com/search?&tbm=isch&q=$1 302
^https:\/\/duckduckgo.com\/\?q=gh\+([^&]+).+ https://github.com/search?q=$1 302
^https:\/\/duckduckgo.com\/\?q=wx\+([^&]+).+ https://weixin.sogou.com/weixinwap?query=$1 302
^https:\/\/duckduckgo.com\/\?q=jd\+([^&]+).+ https://so.m.jd.com/ware/search.action?keyword=$1 302
^https:\/\/duckduckgo.com\/\?q=ytb\+([^&]+).+ https://www.youtube.com/results?search_query=$1 302
^https:\/\/duckduckgo.com\/\?q=ph\+([^&]+).+ https://cn.pornhub.com/video/search?search=$1 302
^https:\/\/duckduckgo.com\/\?q=db\+([^&]+).+ https://m.douban.com/search/?query=$1 302
^https:\/\/duckduckgo.com\/\?q=ddg\+([^&]+).+ https://duckduckgo.com/?ia=about&q=$1 302
^https:\/\/duckduckgo.com\/\?q=([^&]+).+ https://www.google.com/search?q=$1 302
^https?:\/\/(www.)?(g|google)\.cn https://www.google.com 302
^https?:\/\/(ditu|maps).google\.cn https://maps.google.com 302

(^https?:\/\/[\w-]+\.googlevideo\.com\/(?!dclk_video_ads).+?)&ctier=L(&.+?),ctier,(.+) url 302 $1$2$3
^https?:\/\/[\w-]+\.googlevideo\.com\/(?!(dclk_video_ads|videoplayback\?)).+&oad url reject-200

^https:\/\/youtubei\.googleapis\.com\/youtubei\/v1\/(browse|next|player|reel\/reel_watch_sequence)\? url script-request-body https://raw.githubusercontent.com/Maasea/sgmodule/master/Script/Youtube/dist/youtube.request.beta.js
^https:\/\/youtubei\.googleapis\.com\/youtubei\/v1\/(browse|next|player|search|reel\/reel_watch_sequence|guide|account\/get_setting)\? url script-response-body https://raw.githubusercontent.com/Maasea/sgmodule/master/Script/Youtube/dist/youtube.response.beta.js

^https?:\/\/(www|s)\.youtube\.com\/api\/stats\/ads url reject-200
^https?:\/\/(www|s)\.youtube\.com\/(pagead|ptracking) url reject-200
^https?:\/\/s\.youtube\.com\/api\/stats\/qoe\?adcontext url reject-200

^https?:\/\/haojia\.m\.smzdm\.com\/detail_modul\/other_modul - reject
^https?:\/\/haojia\.m\.smzdm\.com\/detail_modul\/user_related_modul - reject
^https?:\/\/haojia\.m\.smzdm\.com\/detail_modul\/wiki_related_modul - reject

[Script]
Sub-Store Core=type=http-request,pattern=^https?:\/\/sub\.store\/((download)|api\/(preview|sync|(utils\/node-info))),script-path=https://github.com/sub-store-org/Sub-Store/releases/latest/download/sub-store-1.min.js,requires-body=true,timeout={{{timeout}}},ability="{{{ability}}}",engine={{{engine}}}

Sub-Store Simple=type=http-request,pattern=^https?:\/\/sub\.store,script-path=https://github.com/sub-store-org/Sub-Store/releases/latest/download/sub-store-0.min.js,requires-body=true,timeout={{{timeout}}},engine={{{engine}}}

{{{sync}}}=type=cron,cronexp="{{{cronexp}}}",wake-system=1,timeout={{{timeout}}},script-path=https://github.com/sub-store-org/Sub-Store/releases/latest/download/cron-sync-artifacts.min.js,engine={{{engine}}}

{{{produce}}}=type=cron,cronexp="{{{produce_cronexp}}}",wake-system=1,timeout={{{timeout}}},script-path=https://github.com/sub-store-org/Sub-Store/releases/latest/download/cron-sync-artifacts.min.js,engine={{{engine}}},argument="sub={{{produce_sub}}}&col={{{produce_col}}}"

YJ = type=generic,timeout=5,script-path=https://raw.githubusercontent.com/getsomecat/GetSomeCats/Surge/script/youjia.js,argument=hebei/langfang

è±†ç“£å½±è§† = type=http-response,pattern=^https://m.douban.com/movie/subject/.+,requires-body=1,max-size=0,script-path=https://raw.githubusercontent.com/githubdulong/Script/master/Douban.js

äº¬ä¸œæ¯”ä»· = type=http-response,requires-body=1,pattern=^https?:\/\/api\.m\.jd\.com\/client\.action\?functionId=(wareBusiness|serverConfig|basicConfig),script-path=https://raw.githubusercontent.com/deezertidal/private/main/jdprice.js

bili-json = type=http-response,pattern=^https:\/\/app\.bilibili\.com\/x\/(v2\/(splash\/(list|show)|feed\/index\?)|resource\/show\/tab\/v2),requires-body=1,max-size=0,script-path=https://raw.githubusercontent.com/app2smile/rules/master/js/bilibili-json.js,script-update-interval=0
bili-proto = type=http-response,pattern=^https:\/\/(grpc\.biliapi\.net|app\.bilibili\.com)\/bilibili\.app\.(viewunite\.v1\.View\/View|dynamic\.v2\.Dynamic\/DynAll)$,requires-body=1,binary-body-mode=1,max-size=0,script-path=https://raw.githubusercontent.com/app2smile/rules/master/js/bilibili-proto.js,script-update-interval=0

è´´å§json = type=http-response,pattern=^http(s:\/\/tiebac|:\/\/c\.tieba)\.baidu\.com\/(c\/(s\/sync|f\/(frs\/(page|threadlist|generalTabList)|pb\/(pic)?page|excellent\/personalized))$|tiebaads\/commonbatch\?),requires-body=1,max-size=0,script-path=https://raw.githubusercontent.com/app2smile/rules/master/js/tieba-json2.js,script-update-interval=0

ä»€ä¹ˆå€¼å¾—ä¹°_å¼€å±å»å¹¿å‘Š = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/app-api\.smzdm\.com\/util\/loading,script-path=https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/smzdm/smzdm_remove_ads.js
ä»€ä¹ˆå€¼å¾—ä¹°_é¦–é¡µå»å¹¿å‘Š = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/homepage-api\.smzdm\.com\/v3\/home,script-path=https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/smzdm/smzdm_remove_ads.js
ä»€ä¹ˆå€¼å¾—ä¹°_å¥½ä»·å»å¹¿å‘Š = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/haojia-api\.smzdm\.com\/home\/list,script-path=https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/smzdm/smzdm_remove_ads.js
ä»€ä¹ˆå€¼å¾—ä¹°_å¥½ä»·è¯¦æƒ…é¡µå»å¹¿å‘Š = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/haojia\.m\.smzdm\.com\/detail_modul\/article_releated_modul,script-path=https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/smzdm/smzdm_remove_ads.js
ä»€ä¹ˆå€¼å¾—ä¹°_ç™¾ç§‘å»å¹¿å‘Š = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/baike-api\.smzdm\.com\/home_v3\/list,script-path=https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/smzdm/smzdm_remove_ads.js
ä»€ä¹ˆå€¼å¾—ä¹°_æœç´¢ç»“æœå»å¹¿å‘Š = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/s-api\.smzdm\.com\/sou\/list_v10,script-path=https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/smzdm/smzdm_remove_ads.js
ä»€ä¹ˆå€¼å¾—ä¹°_æœç´¢æ ‡ç­¾å»å¹¿å‘Š = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/s-api\.smzdm\.com\/sou\/filter\/tags\/hot_tags,script-path=https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/smzdm/smzdm_remove_ads.js
ä»€ä¹ˆå€¼å¾—ä¹°_å€¼ä¼šå‘˜æƒç›Šä¸­å¿ƒbannerå»å¹¿å‘Š = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/zhiyou\.m\.smzdm\.com\/user\/vip\/ajax_get_banner,script-path=https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/smzdm/smzdm_remove_ads.js

å¹¿å‘Šè”ç›Ÿjson = type=http-response,pattern=^https:\/\/((api-access\.pangolin-sdk-toutiao|is\.snssdk)\.com\/api\/ad\/union\/sdk\/get_ads|open\.e\.kuaishou\.com\/rest\/e\/v3\/open\/univ$|mi\.gdt\.qq\.com\/gdt_mview\.fcg\?),requires-body=1,max-size=0,script-path=https://raw.githubusercontent.com/app2smile/rules/master/js/adsense.js

æœºåœºä¿¡æ¯ = type=http-request,timeout=10,pattern=http://sub\.info,script-path=https://raw.githubusercontent.com/TributePaulWalker/Profiles/main/JavaScript/Surge/Sub_info_lite.js

[SSID Setting]
"" suspend=true

[MITM]
# è·³è¿‡æœåŠ¡ç«¯è¯ä¹¦éªŒè¯
skip-server-cert-verify = true

# MITM over HTTP/2
h2 = true

# ä¸»æœºå
hostname = api.m.jd.com, m.douban.com, duckduckgo.com, sub.store, www.google.cn, app.bilibili.com, grpc.biliapi.net, -redirector*.googlevideo.com,*.googlevideo.com,www.youtube.com,s.youtube.com,youtubei.googleapis.com, app-api.smzdm.com,homepage-api.smzdm.com,haojia-api.smzdm.com,haojia.m.smzdm.com,baike-api.smzdm.com,s-api.smzdm.com,zhiyou.m.smzdm.com, tiebac.baidu.com, api-access.pangolin-sdk-toutiao.com, is.snssdk.com, mi.gdt.qq.com, open.e.kuaishou.com